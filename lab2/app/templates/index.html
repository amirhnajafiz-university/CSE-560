<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vislab - Lab 2(a)</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
    <style>
        .popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            height: 80%;
            background-color: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            z-index: 1005;
            padding: 20px;
            overflow: auto;
        }

        .faded {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1004;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
        }

        .fixed-btn {
            position: absolute;
            top: -20px;
            right: 10px;
            width: 40px;
            height: 40px;
            border-radius: 100%;
            text-align: center;
            border: 0;
            background-color: #006de1;
            color: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }
    </style>
</head>
<body>
    <div id="alert-container"></div>

    <!-- Toolbar -->
    <div class="toolbar rounded shadow" onclick="toggleToolbarContent()">
        Data Preparation Menu <span id="toolbar-icon" class="icon-arrow-down"></span>
    </div>

    <!-- Toolbar Content -->
    <div class="toolbar-content rounded shadow" id="toolbar-content">
        <div class="container">
            <label for="sample-number" class="form-range">Number of Samples: <span id="range-value" class="range-value">1</span></label>
            <div class="d-flex align-items-center justify-content-center">
                <button class="btn btn-sm btn-circle rounded-circle btn-primary mx-2" onclick="changeValue(-1)">-</button>
                <span id="min-value">1</span>
                <div class="range-container mx-2">
                    <input type="range" class="form-range" min="1" max="1275" step="1" value="500" id="sample-number" oninput="updateRangeValue()">
                </div>
                <span id="max-value">1275</span>
                <button class="btn btn-sm btn-circle rounded-circle btn-primary mx-2" onclick="changeValue(1)">+</button>
            </div>
            <div class="row my-4 px-3">
                <div class="form-check col-sm-6">
                    <input class="form-check-input" type="checkbox" checked id="drop-none">
                    <label class="form-check-label" for="drop-none">
                        Drop None
                    </label>
                </div>
                <div class="form-check col-sm-6">
                    <input class="form-check-input" type="checkbox" checked id="drop-categorical">
                    <label class="form-check-label" for="drop-categorical">
                        No Categorical
                    </label>
                </div>
                <div class="form-check col-6 mt-2">
                    <input class="form-check-input" type="checkbox" checked id="standardize">
                    <label class="form-check-label" for="standardize">
                        Standardize
                    </label>
                </div>
                <div class="form-check col-6 mt-2">
                    <input class="form-check-input" type="checkbox" id="resample">
                    <label class="form-check-label" for="resample">
                        Resample
                    </label>
                </div>
            </div>
            <div class="d-flex justify-content-center mt-4">
                <button class="btn btn-sm btn-success mx-2" onclick="updateData()">Prepare</button>
                <button class="btn btn-sm btn-danger mx-2" onclick="resetData()">Reset</button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container mt-4" style="min-height: 650px;">
        <!-- Holders -->
        <div class="my-5 bg-light p-3 rounded shadow" style="min-height: 300px; position: relative;">
            <!-- Fixed Button -->
            <button class="fixed-btn" onclick="showPopup()">
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-info-lg" viewBox="0 0 16 16">
                    <path d="m9.708 6.075-3.024.379-.108.502.595.108c.387.093.464.232.38.619l-.975 4.577c-.255 1.183.14 1.74 1.067 1.74.72 0 1.554-.332 1.933-.789l.116-.549c-.263.232-.65.325-.905.325-.363 0-.494-.255-.402-.704zm.091-2.755a1.32 1.32 0 1 1-2.64 0 1.32 1.32 0 0 1 2.64 0"/>
                </svg>
            </button>

            <!-- Title -->
            <h1 class="text-center mb-3">Laptop Prices</h1>

            <!-- Description -->
            <p style="text-align: justify;">
                Hello, and welcome to the Laptop Prices Dataset Analysis.
                In this task, we will apply dimensionality reduction techniques to our dataset to identify the most relevant features for analysis. This will help us focus on the key attributes that have the most impact on laptop pricing.
            </p>

            <!-- SVGs for Charts -->
            <div class="d-flex justify-content-center mb-4 mt-4 pt-4">
                <svg id="plot"></svg>
            </div>
            <div class="mb-2 mt-2 pt-2" style="text-align: center;">
                <input type="checkbox" id="change-di" checked />
                <label for="change-di">Change Intrinsic Dimensionality Index</label>
            </div>
            <div class="d-flex justify-content-center mb-4 mt-4 pt-4">
                <svg id="biplot"></svg>
            </div>
            <div class="d-flex justify-content-center flex-column align-items-center mb-4 mt-4 pt-4">
                <div class="title mb-3">Top 4 Attributes</div>
                <table id="attributes" class="table table-sm table-striped table-bordered table-hover w-25">
                    <thead class="thead-dark">
                        <tr>
                            <th style="text-align: center;">Attribute</th>
                            <th style="text-align: center;">Squared Sum</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            <div class="d-flex justify-content-center mb-4 mt-4 pt-4">
                <div id="matrix"></div>
            </div>
            <div class="d-flex justify-content-center mb-4 mt-4 pt-4">
                <svg id="kmse"></svg>
            </div>
            <div class="d-flex justify-content-center mb-4 mt-4 pt-4">
                <svg id="clusters"></svg>
            </div>

            <!-- Options -->
            <div class="options options-small shadow">
                <div class="d-flex justify-content-center w-100 mb-2">
                    <button class="btn btn-sm" onclick="decScale()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-zoom-in" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11M13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0"/>
                            <path d="M10.344 11.742q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1 6.5 6.5 0 0 1-1.398 1.4z"/>
                            <path fill-rule="evenodd" d="M6.5 3a.5.5 0 0 1 .5.5V6h2.5a.5.5 0 0 1 0 1H7v2.5a.5.5 0 0 1-1 0V7H3.5a.5.5 0 0 1 0-1H6V3.5a.5.5 0 0 1 .5-.5"/>
                        </svg>
                    </button>
                    <button class="btn btn-sm" onclick="incScale()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-zoom-out" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11M13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0"/>
                            <path d="M10.344 11.742q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1 6.5 6.5 0 0 1-1.398 1.4z"/>
                            <path fill-rule="evenodd" d="M3 6.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5"/>
                        </svg>
                    </button>
                </div>
                <div>
                    <input type="number" id="tickness" min="1" max="4" value="2" />
                    <label for="toggle-grids">Tickness</label>
                </div>
                <div>
                    <input type="checkbox" id="toggle-titles" checked />
                    <label for="toggle-titles">Titles</label>
                </div>
                <div>
                    <input type="checkbox" id="toggle-grids" checked />
                    <label for="toggle-grids">Grids</label>
                </div>
                <div>
                    <input type="checkbox" id="toggle-labels" checked />
                    <label for="toggle-labels">Labels</label>
                </div>
                <div>
                    <input type="color" id="line-color-picker" style="width: 20px;" value="#006de1" />
                    <label for="line-color-picker">Line Color</label>
                </div>
                <div>
                    <input type="color" id="plot-color-picker" style="width: 20px;" value="#006de1" />
                    <label for="plot-color-picker">Plot Color</label>
                </div>
            </div>
        </div>
    </div>

    <!-- Popup -->
    <div class="popup" id="popup">
        <button class="btn btn-danger shadow close-btn" onclick="hidePopup()">X</button>
        <h2>About</h2>
        <p>This is a big popup. You can add any content here.</p>
    </div>
    <div class="faded" id="fade"></div>

    <!-- Scripts -->
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script src="{{ url_for('static', filename='scripts/handlers.js') }}"></script>
    <script src="{{ url_for('static', filename='scripts/main.js') }}"></script>
    <script src="{{ url_for('static', filename='scripts/plots.js') }}"></script>
    <script>
        function showPopup() {
            document.getElementById('popup').style.display = 'block';
            document.getElementById('fade').style.display = 'block';
        }

        function hidePopup() {
            document.getElementById('popup').style.display = 'none';
            document.getElementById('fade').style.display = 'none';
        }
    </script>
</body>
</html>
